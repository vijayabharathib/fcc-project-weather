var apiURLOriginal="https://api.openweathermap.org/data/2.5/weather?lat=13&lon=80&appid=0f92d0a980ae6e7fec3a210ee045a359",apiURL="http://api.openweathermap.org/data/2.5/weather?units=metric&",apiKey="0f92d0a980ae6e7fec3a210ee045a359",iconURL="https://openweathermap.org/img/w/",locationAvailable=!1,coordinates={lat:"",lon:""},debug=!1,log=function(e){debug&&console.log(e)},stub={coord:{lon:79.95,lat:12.97},weather:[{id:801,main:"Clouds",description:"few clouds",icon:"02n"}],base:"stations",main:{temp:24.14,pressure:1010.68,humidity:58,temp_min:24.14,temp_max:24.14,sea_level:1020.92,grnd_level:1010.68},wind:{speed:3.77,deg:84.5033},clouds:{all:12},dt:1476891739,sys:{message:.0108,country:"IN",sunrise:1476837068,sunset:1476879519},id:1255630,name:"Sriperumbudur",cod:200},weatherAPIData={};$(document).ready(function(){function e(){log("inside getcoordinates"),$("#progress").html("Receiving coordinates..."),"geolocation"in navigator&&(log("geolocation functionality available"),navigator.geolocation.getCurrentPosition(a,t,n))}function a(e){log("coordinates successfully received inside showPosition"),locationAvailable=!0,coordinates.lat=e.coords.latitude,coordinates.lon=e.coords.longitude,log("inside show position: lat:"+coordinates.lat+"lon:"+coordinates.lon),o()}function t(e){log("inside position error with error code "+e.code),1==e.code?(locationAvailable=!1,$("#progress").html("Error getting coordinates: Permission denied")):2==e.code?(locationAvailable=!1,$("#progress").html("Error: Unable to get location.")):log("unhandled position error 3 - timeout")}function o(){log("inside getweather"),0!=locationAvailable&&(log("getWeather: location available"),$("#progress").html("Receiving weather details..."),$.ajax({url:apiURL+"lat="+coordinates.lat+"&lon="+coordinates.lon+"&appid="+apiKey,success:function(e){weatherAPIData=e;var a=new Date;$("#progress").html("Weather details updated at "+a.toTimeString()+"."),log("weather details received"),i()},cache:!0}))}function i(){if(0!=locationAvailable){log("renderWeather : proceeding"),$(".temperature").html(weatherAPIData.main.temp),$(".unit").html("&deg;C"),$(".location").html(weatherAPIData.name+", "+weatherAPIData.sys.country);var e=weatherAPIData.weather[0].icon;$(".icon").css("background-image","url('"+iconURL+e+".png')"),"d"==e[e.length-1]?($("body").addClass("day"),$("body").removeClass("night")):"n"==e[e.length-1]&&($("body").addClass("night"),$("body").removeClass("day"))}}var n={timeout:1e4,maximumAge:0,enableHighAccuracy:!0};log("page loaded"),e(),$(".toggle").on("click",function(){var e=$(".unit").text();if("F"==e[e.length-1]){var a=Math.round(100*weatherAPIData.main.temp);a/=100,$(".temperature").html(a),$(".unit").html("&deg;C"),$(".toggle").removeClass("fa-toggle-on"),$(".toggle").addClass("fa-toggle-off")}else{var t=Math.round(100*(9*weatherAPIData.main.temp/5+32));t/=100,$(".temperature").html(t),$(".unit").html("&deg;F"),$(".toggle").removeClass("fa-toggle-off"),$(".toggle").addClass("fa-toggle-on")}}),$(".get-weather").on("click",function(){log("inside Get/Refresh weather button click"),e()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYXBpVVJMT3JpZ2luYWwiLCJhcGlVUkwiLCJhcGlLZXkiLCJpY29uVVJMIiwibG9jYXRpb25BdmFpbGFibGUiLCJjb29yZGluYXRlcyIsImxhdCIsImxvbiIsImRlYnVnIiwibG9nIiwicyIsImNvbnNvbGUiLCJzdHViIiwiY29vcmQiLCJ3ZWF0aGVyIiwiaWQiLCJtYWluIiwiZGVzY3JpcHRpb24iLCJpY29uIiwiYmFzZSIsInRlbXAiLCJwcmVzc3VyZSIsImh1bWlkaXR5IiwidGVtcF9taW4iLCJ0ZW1wX21heCIsInNlYV9sZXZlbCIsImdybmRfbGV2ZWwiLCJ3aW5kIiwic3BlZWQiLCJkZWciLCJjbG91ZHMiLCJhbGwiLCJkdCIsInN5cyIsIm1lc3NhZ2UiLCJjb3VudHJ5Iiwic3VucmlzZSIsInN1bnNldCIsIm5hbWUiLCJjb2QiLCJ3ZWF0aGVyQVBJRGF0YSIsIiQiLCJkb2N1bWVudCIsInJlYWR5IiwiZ2V0Q29vcmRpbmF0ZXMiLCJodG1sIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJnZXRDdXJyZW50UG9zaXRpb24iLCJzaG93UG9zaXRpb24iLCJwb3NpdGlvbkVycm9yIiwiZ2VvT3B0aW9ucyIsInBvc2l0aW9uIiwiY29vcmRzIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJnZXRXZWF0aGVyIiwiZXJyb3IiLCJjb2RlIiwiYWpheCIsInVybCIsInN1Y2Nlc3MiLCJkYXRhIiwidCIsIkRhdGUiLCJ0b1RpbWVTdHJpbmciLCJyZW5kZXJXZWF0aGVyIiwiY2FjaGUiLCJjc3MiLCJsZW5ndGgiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwidGltZW91dCIsIm1heGltdW1BZ2UiLCJlbmFibGVIaWdoQWNjdXJhY3kiLCJvbiIsImN1cnJlbnQiLCJ0ZXh0IiwiY2VsIiwiTWF0aCIsInJvdW5kIiwiZmFyIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxnQkFBZSx1R0FDZkMsT0FBUSwrREFDUkMsT0FBTyxtQ0FD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QyxlQUFleEIsS0FBS0ksS0FDdkMwRCxJQUFLLElBQ0xyQyxFQUFFLGdCQUFnQkksS0FBS2lDLEdBQ3ZCckMsRUFBRSxTQUFTSSxLQUFLLFVBQ2hCSixFQUFFLFdBQVc4QixZQUFZLGdCQUN6QjlCLEVBQUUsV0FBVzZCLFNBQVMscUJBQ2pCLENBRUwsR0FBSVcsR0FBSUYsS0FBS0MsTUFBK0MsS0FBWixFQUEzQnhDLGVBQWV4QixLQUFLSSxLQUFXLEVBQUksSUFDeEQ2RCxJQUFLLElBQ0x4QyxFQUFFLGdCQUFnQkksS0FBS29DLEdBQ3ZCeEMsRUFBRSxTQUFTSSxLQUFLLFVBQ2hCSixFQUFFLFdBQVc4QixZQUFZLGlCQUN6QjlCLEVBQUUsV0FBVzZCLFNBQVMsbUJBTzFCN0IsRUFBRSxnQkFBZ0JrQyxHQUFHLFFBQVEsV0FDM0JsRSxJQUFJLDJDQUNKbUMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcGlVUkxPcmlnaW5hbD1cImh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS93ZWF0aGVyP2xhdD0xMyZsb249ODAmYXBwaWQ9MGY5MmQwYTk4MGFlNmU3ZmVjM2EyMTBlZTA0NWEzNTlcIjtcbnZhciBhcGlVUkwgPVwiaHR0cDovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvd2VhdGhlcj91bml0cz1tZXRyaWMmXCI7XG52YXIgYXBpS2V5PVwiMGY5MmQwYTk4MGFlNmU3ZmVjM2EyMTBlZTA0NWEzNTlcIjtcbnZhciBpY29uVVJMPVwiaHR0cHM6Ly9vcGVud2VhdGhlcm1hcC5vcmcvaW1nL3cvXCI7XG52YXIgbG9jYXRpb25BdmFpbGFibGU9ZmFsc2U7XG52YXIgY29vcmRpbmF0ZXM9e2xhdDogXCJcIixsb246XCJcIn07XG52YXIgZGVidWc9ZmFsc2U7IC8vbm8gbG9ncyBpZiBmYWxzZSEgZGV2IG1vZGUgc3dpdGNoLlxuXG4vL2xvZyB0byBjb25zb2xlIG9ubHkgd2hlbiBkZWJ1ZyBtb2RlIGlzIG9uXG52YXIgbG9nPWZ1bmN0aW9uKHMpe1xuICBpZihkZWJ1ZylcbiAgICBjb25zb2xlLmxvZyhzKTtcbn07XG5cbi8vc3R1YiBkYXRhIGZvcm1hdCBmb3IgZGV2ZWxvcG1lbnQgb25seVxudmFyIHN0dWI9e1xuICBcImNvb3JkXCI6e1xuICAgIFwibG9uXCI6NzkuOTUsXG4gICAgXCJsYXRcIjoxMi45N30sXG4gIFwid2VhdGhlclwiOlt7XG4gICAgXCJpZFwiOjgwMSxcbiAgICBcIm1haW5cIjpcIkNsb3Vkc1wiLFxuICAgIFwiZGVzY3JpcHRpb25cIjpcImZldyBjbG91ZHNcIixcbiAgICBcImljb25cIjpcIjAyblwifV0sXG4gIFwiYmFzZVwiOlwic3RhdGlvbnNcIixcbiAgXCJtYWluXCI6e1xuICAgIFwidGVtcFwiOjI0LjE0LFxuICAgIFwicHJlc3N1cmVcIjoxMDEwLjY4LFxuICAgIFwiaHVtaWRpdHlcIjo1OCxcbiAgICBcInRlbXBfbWluXCI6MjQuMTQsXG4gICAgXCJ0ZW1wX21heFwiOjI0LjE0LFxuICAgIFwic2VhX2xldmVsXCI6MTAyMC45MixcbiAgICBcImdybmRfbGV2ZWxcIjoxMDEwLjY4fSxcbiAgXCJ3aW5kXCI6e1xuICAgIFwic3BlZWRcIjozLjc3LFxuICAgIFwiZGVnXCI6ODQuNTAzM30sXG4gIFwiY2xvdWRzXCI6e1xuICAgIFwiYWxsXCI6MTJ9LFxuICBcImR0XCI6MTQ3Njg5MTczOSxcbiAgXCJzeXNcIjp7XG4gICAgXCJtZXNzYWdlXCI6MC4wMTA4LFxuICAgIFwiY291bnRyeVwiOlwiSU5cIixcbiAgICBcInN1bnJpc2VcIjoxNDc2ODM3MDY4LFxuICAgIFwic3Vuc2V0XCI6MTQ3Njg3OTUxOX0sXG4gIFwiaWRcIjoxMjU1NjMwLFxuICBcIm5hbWVcIjpcIlNyaXBlcnVtYnVkdXJcIixcbiAgXCJjb2RcIjoyMDBcbn07XG5cbnZhciB3ZWF0aGVyQVBJRGF0YT17fTsvL2NvbnRhaW5lciBmb3IgYXBpIHJlc3BvbnNlXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpeyAvL2xldCB0aGUgZG9jdW1lbnQgbG9hZCBmaXJzdCwgcGF0aWVuY2UhXG4gIC8qKlxuICAgICogZ2V0IGN1cnJlbnQgY29vcmRpYW50ZXMgdXNpbmcgaHRtbDUgbmF2aWdhdG9yIGFwaVxuICAgICogc3RvcmUgd2hlbiAgY29vcmRpbmF0ZXMgYXJlIGF2YWlsYWJsZVxuICAgICogc2hvdyBlcnJvciB3aGVuIGdlb2xvY2F0aW9uIGZhaWxzXG4gICAgKiB1c2UgdGltZW91dCwgY2FjaGUgJiBhY2N1cmFjeSAtIG9wdGlvbnMgb2JqZWN0XG4gICAgKi9cbiAgZnVuY3Rpb24gZ2V0Q29vcmRpbmF0ZXMoKXtcbiAgICBsb2coXCJpbnNpZGUgZ2V0Y29vcmRpbmF0ZXNcIik7XG4gICAgJCgnI3Byb2dyZXNzJykuaHRtbChcIlJlY2VpdmluZyBjb29yZGluYXRlcy4uLlwiKTtcbiAgICBpZiAoJ2dlb2xvY2F0aW9uJyBpbiBuYXZpZ2F0b3IpIHtcbiAgICAgIGxvZyhcImdlb2xvY2F0aW9uIGZ1bmN0aW9uYWxpdHkgYXZhaWxhYmxlXCIpO1xuICAgICAgbmF2aWdhdG9yXG4gICAgICAgIC5nZW9sb2NhdGlvblxuICAgICAgICAuZ2V0Q3VycmVudFBvc2l0aW9uKFxuICAgICAgICAgIHNob3dQb3NpdGlvbixcbiAgICAgICAgICBwb3NpdGlvbkVycm9yLFxuICAgICAgICAgIGdlb09wdGlvbnMpO1xuICAgIH1cbiAgfVxuICB2YXIgZ2VvT3B0aW9ucz17IHRpbWVvdXQ6IDEwMDAwLFxuICAgICAgICAgICAgbWF4aW11bUFnZTogMCxcbiAgICAgICAgICAgIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZX07XG4gIGZ1bmN0aW9uIHNob3dQb3NpdGlvbihwb3NpdGlvbil7XG4gICAgbG9nKFwiY29vcmRpbmF0ZXMgc3VjY2Vzc2Z1bGx5IHJlY2VpdmVkIGluc2lkZSBzaG93UG9zaXRpb25cIik7XG4gICAgbG9jYXRpb25BdmFpbGFibGU9dHJ1ZTsgLy91c2VkIGJlZm9yZSBhc2tpbmcgZm9yIHdlYXRoZXIgZGF0YVxuICAgIC8vc3RvcmUgY29vcmRzIGZvciBhcGkgYWpheCBjYWxsXG4gICAgY29vcmRpbmF0ZXMubGF0PXBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZTtcbiAgICBjb29yZGluYXRlcy5sb249cG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZTtcbiAgICBsb2coXCJpbnNpZGUgc2hvdyBwb3NpdGlvbjogbGF0OlwiXG4gICAgICAgICsgY29vcmRpbmF0ZXMubGF0ICsgXCJsb246XCIgKyBjb29yZGluYXRlcy5sb24pO1xuICAgIC8vbmljZSB0byBoYXZlIGNvb3JkaW5hdGVzIGRpc3BsYXlcbiAgICAvKiQoXCIjZGF0YVwiKS5odG1sKFwibGF0aXR1ZGU6IFwiXG4gICAgICAgICsgcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlXG4gICAgICAgICsgXCI7bG9uZ2l0dWRlOiBcIlxuICAgICAgICArIHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGUpOyovXG4gICAgZ2V0V2VhdGhlcigpO1xuICB9XG4gIC8qKlxuICAgICogY2FsbCBiYWNrIHBvc2l0aW9uRXJyb3IgaWYgZ2VvbG9jYXRpb24gZmFpbHNcbiAgICAqIHNob3cgZXJyb3Igb24gc2NyZWVuXG4gICAgKiBpZ25vcmUgdGltZW91dCAoYnJvd3NlciBnbGl0Y2hlcyBldmVuIG9uIHN1Y2Nlc3MpXG4gICAgKi9cbiAgZnVuY3Rpb24gcG9zaXRpb25FcnJvcihlcnJvcil7XG4gICAgbG9nKFwiaW5zaWRlIHBvc2l0aW9uIGVycm9yIHdpdGggZXJyb3IgY29kZSBcIiArIGVycm9yLmNvZGUpO1xuICAgIGlmKGVycm9yLmNvZGU9PTEpe1xuICAgICAgbG9jYXRpb25BdmFpbGFibGU9ZmFsc2U7XG4gICAgICAkKFwiI3Byb2dyZXNzXCIpLmh0bWwoXCJFcnJvciBnZXR0aW5nIGNvb3JkaW5hdGVzOiBQZXJtaXNzaW9uIGRlbmllZFwiKTtcbiAgICB9IGVsc2UgaWYgKGVycm9yLmNvZGU9PTIpIHtcbiAgICAgIGxvY2F0aW9uQXZhaWxhYmxlPWZhbHNlO1xuICAgICAgJChcIiNwcm9ncmVzc1wiKS5odG1sKFwiRXJyb3I6IFVuYWJsZSB0byBnZXQgbG9jYXRpb24uXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2coXCJ1bmhhbmRsZWQgcG9zaXRpb24gZXJyb3IgMyAtIHRpbWVvdXRcIik7XG4gICAgICAvL2ZpcmVmb3ggc2VlbXMgdG8gYmUgcmV0dXJuaW5nIDMgZXZlbiBhZnRlciBzdWNjZXNzIGNhbGxzXG4gICAgICAvL2hlbmNlLCBsZWZ0IHVuaGFuZGxlZFxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFdlYXRoZXIoKXtcbiAgICBsb2coXCJpbnNpZGUgZ2V0d2VhdGhlclwiKTtcbiAgICBpZihsb2NhdGlvbkF2YWlsYWJsZT09ZmFsc2UpXG4gICAgICByZXR1cm47IC8vZG8gbm90IHByb2NlZWQgZnVydGhlclxuICAgIGxvZyhcImdldFdlYXRoZXI6IGxvY2F0aW9uIGF2YWlsYWJsZVwiKTtcbiAgICAkKCcjcHJvZ3Jlc3MnKS5odG1sKFwiUmVjZWl2aW5nIHdlYXRoZXIgZGV0YWlscy4uLlwiKTtcbiAgICAkLmFqYXgoIHtcbiAgICAgIHVybDogYXBpVVJMXG4gICAgICAgICsgXCJsYXQ9XCIgKyBjb29yZGluYXRlcy5sYXRcbiAgICAgICAgKyBcIiZsb249XCIgKyBjb29yZGluYXRlcy5sb25cbiAgICAgICAgKyBcIiZhcHBpZD1cIiArIGFwaUtleSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgd2VhdGhlckFQSURhdGE9ZGF0YTsgLy9zdG9yZSByZXNwb25zZSBpbiBjb250cmFpbmVyIGZvciByZW5kZXJpbmdcbiAgICAgICAgdmFyIHQ9bmV3IERhdGUoKTtcbiAgICAgICAgJCgnI3Byb2dyZXNzJykuaHRtbChcIldlYXRoZXIgZGV0YWlscyB1cGRhdGVkIGF0IFwiXG4gICAgICAgICAgICArIHQudG9UaW1lU3RyaW5nKCkgKyBcIi5cIik7XG4gICAgICAgIGxvZyhcIndlYXRoZXIgZGV0YWlscyByZWNlaXZlZFwiKTtcbiAgICAgICAgcmVuZGVyV2VhdGhlcigpO1xuICAgICAgfSxcbiAgICAgIGNhY2hlOiB0cnVlXG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gcmVuZGVyV2VhdGhlcigpe1xuICAgIGlmKGxvY2F0aW9uQXZhaWxhYmxlPT1mYWxzZSlcbiAgICAgIHJldHVybjsgLy9kbyBub3QgcHJvY2VlZCBmdXJ0aGVyXG4gICAgbG9nKFwicmVuZGVyV2VhdGhlciA6IHByb2NlZWRpbmdcIik7XG4gICAgJCgnLnRlbXBlcmF0dXJlJykuaHRtbCh3ZWF0aGVyQVBJRGF0YS5tYWluLnRlbXApO1xuICAgICQoJy51bml0JykuaHRtbChcIiZkZWc7Q1wiKTtcbiAgICAkKCcubG9jYXRpb24nKS5odG1sKHdlYXRoZXJBUElEYXRhLm5hbWUgKyBcIiwgXCIgKyB3ZWF0aGVyQVBJRGF0YS5zeXMuY291bnRyeSk7XG4gICAgdmFyIGljb249d2VhdGhlckFQSURhdGEud2VhdGhlclswXS5pY29uO1xuICAgICQoJy5pY29uJykuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFxuICAgICAgICBcInVybCgnXCIgKyBpY29uVVJMICsgaWNvbiArIFwiLnBuZycpXCIpO1xuICAgIC8qKlxuICAgICAgKmV4dHJhcyBleGNsdWRlZCBmb3Igbm93XG4gICAgJCgnLndlYXRoZXInKS5odG1sKHdlYXRoZXJBUElEYXRhLndlYXRoZXJbMF0ubWFpblxuICAgICAgICArIFwiIHwgXCJcbiAgICAgICAgKyB3ZWF0aGVyQVBJRGF0YS53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uKTtcbiAgICAkKCcud2luZCcpLmh0bWwoXCJXaW5kIHNwZWVkXCJcbiAgICAgICAgKyB3ZWF0aGVyQVBJRGF0YS53aW5kLnNwZWVkICsgXCJtL3MgYXQgXCJcbiAgICAgICAgKyB3ZWF0aGVyQVBJRGF0YS53aW5kLmRlZyArIFwiIGRlZ3JlZXNcIik7XG4gICAgICAgICovXG4gICAgaWYoaWNvbltpY29uLmxlbmd0aC0xXT09XCJkXCIpe1xuICAgICAgJChcImJvZHlcIikuYWRkQ2xhc3MoXCJkYXlcIik7XG4gICAgICAkKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcIm5pZ2h0XCIpO1xuICAgIH1lbHNlIGlmKGljb25baWNvbi5sZW5ndGgtMV09PVwiblwiKXtcbiAgICAgICQoXCJib2R5XCIpLmFkZENsYXNzKFwibmlnaHRcIik7XG4gICAgICAkKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcImRheVwiKTtcbiAgICB9XG4gIH1cblxuICAvLyBnZXQgbG9jYXRpb24gYW5kIHJlbmRlciB3ZWF0aGVyXG4gIC8vIGFmdGVyIHBhZ2UgbG9hZFxuICBsb2coXCJwYWdlIGxvYWRlZFwiKTtcbiAgZ2V0Q29vcmRpbmF0ZXMoKTtcblxuICAvKipcbiAgICAqIHRvZ2dsZSBiZXR3ZWVuIGNlbHNpdXMgYW5kIGZhaHJlbmhlaXRcbiAgICAqIGFkZC9yZW1vdmUgZm9udGF3ZXNvbWUgY2xhc3Nlc1xuICAgICogY2FsY3VsYXRlIGFuZCB1cGRhdGUgdGVtcGVyYXR1cmVcbiAgICAqIGZhaHJlbmhlaXQgPSAoY2Vsc2l1cyAqIDkvNSkrMzJcbiAgICAqL1xuICAkKCcudG9nZ2xlJykub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7XG4gICAgdmFyIGN1cnJlbnQ9JCgnLnVuaXQnKS50ZXh0KCk7XG4gICAgaWYoY3VycmVudFtjdXJyZW50Lmxlbmd0aC0xXT09XCJGXCIpeyAvL2NoZWNrIGxhc3QgbGV0dGVyIG9mIGN1cnJlbnQgdGV4dFxuICAgICAgdmFyIGNlbD1NYXRoLnJvdW5kKHdlYXRoZXJBUElEYXRhLm1haW4udGVtcCoxMDApOyAvL3NjYWxlIHVwIGJ5ICoxMDBcbiAgICAgIGNlbC89MTAwOyAvL3NjYWxlIGRvd25cbiAgICAgICQoJy50ZW1wZXJhdHVyZScpLmh0bWwoY2VsKTtcbiAgICAgICQoJy51bml0JykuaHRtbChcIiZkZWc7Q1wiKTtcbiAgICAgICQoJy50b2dnbGUnKS5yZW1vdmVDbGFzcyhcImZhLXRvZ2dsZS1vblwiKTtcbiAgICAgICQoJy50b2dnbGUnKS5hZGRDbGFzcyhcImZhLXRvZ2dsZS1vZmZcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vY2FsYyBmYXJlbmhlaXQgYW5kIG11bHRpcGx5IGJ5IDEwMCBmb3Igc2NhbGUgdXAgKHR3byBkZWNpbWFsIGhhY2spXG4gICAgICB2YXIgZmFyPU1hdGgucm91bmQoKCh3ZWF0aGVyQVBJRGF0YS5tYWluLnRlbXAgKiA5IC8gNSApKzMyKSoxMDApO1xuICAgICAgZmFyLz0xMDA7IC8vc2NhbCBkb3duIHRvIHR3byBkZWNpbWFsc1xuICAgICAgJCgnLnRlbXBlcmF0dXJlJykuaHRtbChmYXIpO1xuICAgICAgJCgnLnVuaXQnKS5odG1sKFwiJmRlZztGXCIpO1xuICAgICAgJCgnLnRvZ2dsZScpLnJlbW92ZUNsYXNzKFwiZmEtdG9nZ2xlLW9mZlwiKTtcbiAgICAgICQoJy50b2dnbGUnKS5hZGRDbGFzcyhcImZhLXRvZ2dsZS1vblwiKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgICogcmVmcmVzaCB3ZWF0aGVyIG9uIGRlbWFuZFxuICAgICovXG4gICQoJy5nZXQtd2VhdGhlcicpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe1xuICAgIGxvZyhcImluc2lkZSBHZXQvUmVmcmVzaCB3ZWF0aGVyIGJ1dHRvbiBjbGlja1wiKTtcbiAgICBnZXRDb29yZGluYXRlcygpO1xuICB9KTtcbn0pO1xuIl19
