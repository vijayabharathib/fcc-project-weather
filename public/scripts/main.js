var apiURLOriginal="http://api.openweathermap.org/data/2.5/weather?lat=13&lon=80&appid=0f92d0a980ae6e7fec3a210ee045a359",apiURL="http://api.openweathermap.org/data/2.5/weather?units=metric&",apiKey="0f92d0a980ae6e7fec3a210ee045a359",iconURL="http://openweathermap.org/img/w/",locationAvailable=!1,coordinates={lat:"",lon:""},debug=!1,log=function(e){debug&&console.log(e)},stub={coord:{lon:79.95,lat:12.97},weather:[{id:801,main:"Clouds",description:"few clouds",icon:"02n"}],base:"stations",main:{temp:24.14,pressure:1010.68,humidity:58,temp_min:24.14,temp_max:24.14,sea_level:1020.92,grnd_level:1010.68},wind:{speed:3.77,deg:84.5033},clouds:{all:12},dt:1476891739,sys:{message:.0108,country:"IN",sunrise:1476837068,sunset:1476879519},id:1255630,name:"Sriperumbudur",cod:200},weatherAPIData={};$(document).ready(function(){function e(){log("inside getcoordinates"),$("#progress").html("Receiving coordinates..."),"geolocation"in navigator&&(log("geolocation functionality available"),navigator.geolocation.getCurrentPosition(a,t,n))}function a(e){log("coordinates successfully received inside showPosition"),locationAvailable=!0,coordinates.lat=e.coords.latitude,coordinates.lon=e.coords.longitude,log("inside show position: lat:"+coordinates.lat+"lon:"+coordinates.lon),o()}function t(e){log("inside position error with error code "+e.code),1==e.code?(locationAvailable=!1,$("#progress").html("Error getting coordinates: Permission denied")):2==e.code?(locationAvailable=!1,$("#progress").html("Error: Unable to get location.")):log("unhandled position error 3 - timeout")}function o(){log("inside getweather"),0!=locationAvailable&&(log("getWeather: location available"),$("#progress").html("Receiving weather details..."),$.ajax({url:apiURL+"lat="+coordinates.lat+"&lon="+coordinates.lon+"&appid="+apiKey,success:function(e){weatherAPIData=e;var a=new Date;$("#progress").html("Weather details updated at "+a.toTimeString()+"."),log("weather details received"),i()},cache:!0}))}function i(){if(0!=locationAvailable){log("renderWeather : proceeding"),$(".temperature").html(weatherAPIData.main.temp),$(".unit").html("&deg;C"),$(".location").html(weatherAPIData.name+", "+weatherAPIData.sys.country);var e=weatherAPIData.weather[0].icon;$(".icon").css("background-image","url('"+iconURL+e+".png')"),"d"==e[e.length-1]?($("body").addClass("day"),$("body").removeClass("night")):"n"==e[e.length-1]&&($("body").addClass("night"),$("body").removeClass("day"))}}var n={timeout:1e4,maximumAge:0,enableHighAccuracy:!0};log("page loaded"),e(),$(".toggle").on("click",function(){var e=$(".unit").text();if("F"==e[e.length-1]){var a=Math.round(100*weatherAPIData.main.temp);a/=100,$(".temperature").html(a),$(".unit").html("&deg;C"),$(".toggle").removeClass("fa-toggle-on"),$(".toggle").addClass("fa-toggle-off")}else{var t=Math.round(100*(9*weatherAPIData.main.temp/5+32));t/=100,$(".temperature").html(t),$(".unit").html("&deg;F"),$(".toggle").removeClass("fa-toggle-off"),$(".toggle").addClass("fa-toggle-on")}}),$(".get-weather").on("click",function(){log("inside Get/Refresh weather button click"),e()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYXBpVVJMT3JpZ2luYWwiLCJhcGlVUkwiLCJhcGlLZXkiLCJpY29uVVJMIiwibG9jYXRpb25BdmFpbGFibGUiLCJjb29yZGluYXRlcyIsImxhdCIsImxvbiIsImRlYnVnIiwibG9nIiwicyIsImNvbnNvbGUiLCJzdHViIiwiY29vcmQiLCJ3ZWF0aGVyIiwiaWQiLCJtYWluIiwiZGVzY3JpcHRpb24iLCJpY29uIiwiYmFzZSIsInRlbXAiLCJwcmVzc3VyZSIsImh1bWlkaXR5IiwidGVtcF9taW4iLCJ0ZW1wX21heCIsInNlYV9sZXZlbCIsImdybmRfbGV2ZWwiLCJ3aW5kIiwic3BlZWQiLCJkZWciLCJjbG91ZHMiLCJhbGwiLCJkdCIsInN5cyIsIm1lc3NhZ2UiLCJjb3VudHJ5Iiwic3VucmlzZSIsInN1bnNldCIsIm5hbWUiLCJjb2QiLCJ3ZWF0aGVyQVBJRGF0YSIsIiQiLCJkb2N1bWVudCIsInJlYWR5IiwiZ2V0Q29vcmRpbmF0ZXMiLCJodG1sIiwibmF2aWdhdG9yIiwiZ2VvbG9jYXRpb24iLCJnZXRDdXJyZW50UG9zaXRpb24iLCJzaG93UG9zaXRpb24iLCJwb3NpdGlvbkVycm9yIiwiZ2VvT3B0aW9ucyIsInBvc2l0aW9uIiwiY29vcmRzIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJnZXRXZWF0aGVyIiwiZXJyb3IiLCJjb2RlIiwiYWpheCIsInVybCIsInN1Y2Nlc3MiLCJkYXRhIiwidCIsIkRhdGUiLCJ0b1RpbWVTdHJpbmciLCJyZW5kZXJXZWF0aGVyIiwiY2FjaGUiLCJjc3MiLCJsZW5ndGgiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwidGltZW91dCIsIm1heGltdW1BZ2UiLCJlbmFibGVIaWdoQWNjdXJhY3kiLCJvbiIsImN1cnJlbnQiLCJ0ZXh0IiwiY2VsIiwiTWF0aCIsInJvdW5kIiwiZmFyIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxnQkFBZSxzR0FDZkMsT0FBUSwrREFDUkMsT0FBTyxtQ0FD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QyxlQUFleEIsS0FBS0ksS0FDdkMwRCxJQUFLLElBQ0xyQyxFQUFFLGdCQUFnQkksS0FBS2lDLEdBQ3ZCckMsRUFBRSxTQUFTSSxLQUFLLFVBQ2hCSixFQUFFLFdBQVc4QixZQUFZLGdCQUN6QjlCLEVBQUUsV0FBVzZCLFNBQVMscUJBQ2pCLENBRUwsR0FBSVcsR0FBSUYsS0FBS0MsTUFBK0MsS0FBWixFQUEzQnhDLGVBQWV4QixLQUFLSSxLQUFXLEVBQUksSUFDeEQ2RCxJQUFLLElBQ0x4QyxFQUFFLGdCQUFnQkksS0FBS29DLEdBQ3ZCeEMsRUFBRSxTQUFTSSxLQUFLLFVBQ2hCSixFQUFFLFdBQVc4QixZQUFZLGlCQUN6QjlCLEVBQUUsV0FBVzZCLFNBQVMsbUJBTzFCN0IsRUFBRSxnQkFBZ0JrQyxHQUFHLFFBQVEsV0FDM0JsRSxJQUFJLDJDQUNKbUMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcGlVUkxPcmlnaW5hbD1cImh0dHA6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L3dlYXRoZXI/bGF0PTEzJmxvbj04MCZhcHBpZD0wZjkyZDBhOTgwYWU2ZTdmZWMzYTIxMGVlMDQ1YTM1OVwiO1xudmFyIGFwaVVSTCA9XCJodHRwOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS93ZWF0aGVyP3VuaXRzPW1ldHJpYyZcIjtcbnZhciBhcGlLZXk9XCIwZjkyZDBhOTgwYWU2ZTdmZWMzYTIxMGVlMDQ1YTM1OVwiO1xudmFyIGljb25VUkw9XCJodHRwOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93L1wiO1xudmFyIGxvY2F0aW9uQXZhaWxhYmxlPWZhbHNlO1xudmFyIGNvb3JkaW5hdGVzPXtsYXQ6IFwiXCIsbG9uOlwiXCJ9O1xudmFyIGRlYnVnPWZhbHNlOyAvL25vIGxvZ3MgaWYgZmFsc2UhIGRldiBtb2RlIHN3aXRjaC5cblxuLy9sb2cgdG8gY29uc29sZSBvbmx5IHdoZW4gZGVidWcgbW9kZSBpcyBvblxudmFyIGxvZz1mdW5jdGlvbihzKXtcbiAgaWYoZGVidWcpXG4gICAgY29uc29sZS5sb2cocyk7XG59O1xuXG4vL3N0dWIgZGF0YSBmb3JtYXQgZm9yIGRldmVsb3BtZW50IG9ubHlcbnZhciBzdHViPXtcbiAgXCJjb29yZFwiOntcbiAgICBcImxvblwiOjc5Ljk1LFxuICAgIFwibGF0XCI6MTIuOTd9LFxuICBcIndlYXRoZXJcIjpbe1xuICAgIFwiaWRcIjo4MDEsXG4gICAgXCJtYWluXCI6XCJDbG91ZHNcIixcbiAgICBcImRlc2NyaXB0aW9uXCI6XCJmZXcgY2xvdWRzXCIsXG4gICAgXCJpY29uXCI6XCIwMm5cIn1dLFxuICBcImJhc2VcIjpcInN0YXRpb25zXCIsXG4gIFwibWFpblwiOntcbiAgICBcInRlbXBcIjoyNC4xNCxcbiAgICBcInByZXNzdXJlXCI6MTAxMC42OCxcbiAgICBcImh1bWlkaXR5XCI6NTgsXG4gICAgXCJ0ZW1wX21pblwiOjI0LjE0LFxuICAgIFwidGVtcF9tYXhcIjoyNC4xNCxcbiAgICBcInNlYV9sZXZlbFwiOjEwMjAuOTIsXG4gICAgXCJncm5kX2xldmVsXCI6MTAxMC42OH0sXG4gIFwid2luZFwiOntcbiAgICBcInNwZWVkXCI6My43NyxcbiAgICBcImRlZ1wiOjg0LjUwMzN9LFxuICBcImNsb3Vkc1wiOntcbiAgICBcImFsbFwiOjEyfSxcbiAgXCJkdFwiOjE0NzY4OTE3MzksXG4gIFwic3lzXCI6e1xuICAgIFwibWVzc2FnZVwiOjAuMDEwOCxcbiAgICBcImNvdW50cnlcIjpcIklOXCIsXG4gICAgXCJzdW5yaXNlXCI6MTQ3NjgzNzA2OCxcbiAgICBcInN1bnNldFwiOjE0NzY4Nzk1MTl9LFxuICBcImlkXCI6MTI1NTYzMCxcbiAgXCJuYW1lXCI6XCJTcmlwZXJ1bWJ1ZHVyXCIsXG4gIFwiY29kXCI6MjAwXG59O1xuXG52YXIgd2VhdGhlckFQSURhdGE9e307Ly9jb250YWluZXIgZm9yIGFwaSByZXNwb25zZVxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXsgLy9sZXQgdGhlIGRvY3VtZW50IGxvYWQgZmlyc3QsIHBhdGllbmNlIVxuICAvKipcbiAgICAqIGdldCBjdXJyZW50IGNvb3JkaWFudGVzIHVzaW5nIGh0bWw1IG5hdmlnYXRvciBhcGlcbiAgICAqIHN0b3JlIHdoZW4gIGNvb3JkaW5hdGVzIGFyZSBhdmFpbGFibGVcbiAgICAqIHNob3cgZXJyb3Igd2hlbiBnZW9sb2NhdGlvbiBmYWlsc1xuICAgICogdXNlIHRpbWVvdXQsIGNhY2hlICYgYWNjdXJhY3kgLSBvcHRpb25zIG9iamVjdFxuICAgICovXG4gIGZ1bmN0aW9uIGdldENvb3JkaW5hdGVzKCl7XG4gICAgbG9nKFwiaW5zaWRlIGdldGNvb3JkaW5hdGVzXCIpO1xuICAgICQoJyNwcm9ncmVzcycpLmh0bWwoXCJSZWNlaXZpbmcgY29vcmRpbmF0ZXMuLi5cIik7XG4gICAgaWYgKCdnZW9sb2NhdGlvbicgaW4gbmF2aWdhdG9yKSB7XG4gICAgICBsb2coXCJnZW9sb2NhdGlvbiBmdW5jdGlvbmFsaXR5IGF2YWlsYWJsZVwiKTtcbiAgICAgIG5hdmlnYXRvclxuICAgICAgICAuZ2VvbG9jYXRpb25cbiAgICAgICAgLmdldEN1cnJlbnRQb3NpdGlvbihcbiAgICAgICAgICBzaG93UG9zaXRpb24sXG4gICAgICAgICAgcG9zaXRpb25FcnJvcixcbiAgICAgICAgICBnZW9PcHRpb25zKTtcbiAgICB9XG4gIH1cbiAgdmFyIGdlb09wdGlvbnM9eyB0aW1lb3V0OiAxMDAwMCxcbiAgICAgICAgICAgIG1heGltdW1BZ2U6IDAsXG4gICAgICAgICAgICBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWV9O1xuICBmdW5jdGlvbiBzaG93UG9zaXRpb24ocG9zaXRpb24pe1xuICAgIGxvZyhcImNvb3JkaW5hdGVzIHN1Y2Nlc3NmdWxseSByZWNlaXZlZCBpbnNpZGUgc2hvd1Bvc2l0aW9uXCIpO1xuICAgIGxvY2F0aW9uQXZhaWxhYmxlPXRydWU7IC8vdXNlZCBiZWZvcmUgYXNraW5nIGZvciB3ZWF0aGVyIGRhdGFcbiAgICAvL3N0b3JlIGNvb3JkcyBmb3IgYXBpIGFqYXggY2FsbFxuICAgIGNvb3JkaW5hdGVzLmxhdD1wb3NpdGlvbi5jb29yZHMubGF0aXR1ZGU7XG4gICAgY29vcmRpbmF0ZXMubG9uPXBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGU7XG4gICAgbG9nKFwiaW5zaWRlIHNob3cgcG9zaXRpb246IGxhdDpcIlxuICAgICAgICArIGNvb3JkaW5hdGVzLmxhdCArIFwibG9uOlwiICsgY29vcmRpbmF0ZXMubG9uKTtcbiAgICAvL25pY2UgdG8gaGF2ZSBjb29yZGluYXRlcyBkaXNwbGF5XG4gICAgLyokKFwiI2RhdGFcIikuaHRtbChcImxhdGl0dWRlOiBcIlxuICAgICAgICArIHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZVxuICAgICAgICArIFwiO2xvbmdpdHVkZTogXCJcbiAgICAgICAgKyBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlKTsqL1xuICAgIGdldFdlYXRoZXIoKTtcbiAgfVxuICAvKipcbiAgICAqIGNhbGwgYmFjayBwb3NpdGlvbkVycm9yIGlmIGdlb2xvY2F0aW9uIGZhaWxzXG4gICAgKiBzaG93IGVycm9yIG9uIHNjcmVlblxuICAgICogaWdub3JlIHRpbWVvdXQgKGJyb3dzZXIgZ2xpdGNoZXMgZXZlbiBvbiBzdWNjZXNzKVxuICAgICovXG4gIGZ1bmN0aW9uIHBvc2l0aW9uRXJyb3IoZXJyb3Ipe1xuICAgIGxvZyhcImluc2lkZSBwb3NpdGlvbiBlcnJvciB3aXRoIGVycm9yIGNvZGUgXCIgKyBlcnJvci5jb2RlKTtcbiAgICBpZihlcnJvci5jb2RlPT0xKXtcbiAgICAgIGxvY2F0aW9uQXZhaWxhYmxlPWZhbHNlO1xuICAgICAgJChcIiNwcm9ncmVzc1wiKS5odG1sKFwiRXJyb3IgZ2V0dGluZyBjb29yZGluYXRlczogUGVybWlzc2lvbiBkZW5pZWRcIik7XG4gICAgfSBlbHNlIGlmIChlcnJvci5jb2RlPT0yKSB7XG4gICAgICBsb2NhdGlvbkF2YWlsYWJsZT1mYWxzZTtcbiAgICAgICQoXCIjcHJvZ3Jlc3NcIikuaHRtbChcIkVycm9yOiBVbmFibGUgdG8gZ2V0IGxvY2F0aW9uLlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nKFwidW5oYW5kbGVkIHBvc2l0aW9uIGVycm9yIDMgLSB0aW1lb3V0XCIpO1xuICAgICAgLy9maXJlZm94IHNlZW1zIHRvIGJlIHJldHVybmluZyAzIGV2ZW4gYWZ0ZXIgc3VjY2VzcyBjYWxsc1xuICAgICAgLy9oZW5jZSwgbGVmdCB1bmhhbmRsZWRcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRXZWF0aGVyKCl7XG4gICAgbG9nKFwiaW5zaWRlIGdldHdlYXRoZXJcIik7XG4gICAgaWYobG9jYXRpb25BdmFpbGFibGU9PWZhbHNlKVxuICAgICAgcmV0dXJuOyAvL2RvIG5vdCBwcm9jZWVkIGZ1cnRoZXJcbiAgICBsb2coXCJnZXRXZWF0aGVyOiBsb2NhdGlvbiBhdmFpbGFibGVcIik7XG4gICAgJCgnI3Byb2dyZXNzJykuaHRtbChcIlJlY2VpdmluZyB3ZWF0aGVyIGRldGFpbHMuLi5cIik7XG4gICAgJC5hamF4KCB7XG4gICAgICB1cmw6IGFwaVVSTFxuICAgICAgICArIFwibGF0PVwiICsgY29vcmRpbmF0ZXMubGF0XG4gICAgICAgICsgXCImbG9uPVwiICsgY29vcmRpbmF0ZXMubG9uXG4gICAgICAgICsgXCImYXBwaWQ9XCIgKyBhcGlLZXksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHdlYXRoZXJBUElEYXRhPWRhdGE7IC8vc3RvcmUgcmVzcG9uc2UgaW4gY29udHJhaW5lciBmb3IgcmVuZGVyaW5nXG4gICAgICAgIHZhciB0PW5ldyBEYXRlKCk7XG4gICAgICAgICQoJyNwcm9ncmVzcycpLmh0bWwoXCJXZWF0aGVyIGRldGFpbHMgdXBkYXRlZCBhdCBcIlxuICAgICAgICAgICAgKyB0LnRvVGltZVN0cmluZygpICsgXCIuXCIpO1xuICAgICAgICBsb2coXCJ3ZWF0aGVyIGRldGFpbHMgcmVjZWl2ZWRcIik7XG4gICAgICAgIHJlbmRlcldlYXRoZXIoKTtcbiAgICAgIH0sXG4gICAgICBjYWNoZTogdHJ1ZVxuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIHJlbmRlcldlYXRoZXIoKXtcbiAgICBpZihsb2NhdGlvbkF2YWlsYWJsZT09ZmFsc2UpXG4gICAgICByZXR1cm47IC8vZG8gbm90IHByb2NlZWQgZnVydGhlclxuICAgIGxvZyhcInJlbmRlcldlYXRoZXIgOiBwcm9jZWVkaW5nXCIpO1xuICAgICQoJy50ZW1wZXJhdHVyZScpLmh0bWwod2VhdGhlckFQSURhdGEubWFpbi50ZW1wKTtcbiAgICAkKCcudW5pdCcpLmh0bWwoXCImZGVnO0NcIik7XG4gICAgJCgnLmxvY2F0aW9uJykuaHRtbCh3ZWF0aGVyQVBJRGF0YS5uYW1lICsgXCIsIFwiICsgd2VhdGhlckFQSURhdGEuc3lzLmNvdW50cnkpO1xuICAgIHZhciBpY29uPXdlYXRoZXJBUElEYXRhLndlYXRoZXJbMF0uaWNvbjtcbiAgICAkKCcuaWNvbicpLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIixcbiAgICAgICAgXCJ1cmwoJ1wiICsgaWNvblVSTCArIGljb24gKyBcIi5wbmcnKVwiKTtcbiAgICAvKipcbiAgICAgICpleHRyYXMgZXhjbHVkZWQgZm9yIG5vd1xuICAgICQoJy53ZWF0aGVyJykuaHRtbCh3ZWF0aGVyQVBJRGF0YS53ZWF0aGVyWzBdLm1haW5cbiAgICAgICAgKyBcIiB8IFwiXG4gICAgICAgICsgd2VhdGhlckFQSURhdGEud2VhdGhlclswXS5kZXNjcmlwdGlvbik7XG4gICAgJCgnLndpbmQnKS5odG1sKFwiV2luZCBzcGVlZFwiXG4gICAgICAgICsgd2VhdGhlckFQSURhdGEud2luZC5zcGVlZCArIFwibS9zIGF0IFwiXG4gICAgICAgICsgd2VhdGhlckFQSURhdGEud2luZC5kZWcgKyBcIiBkZWdyZWVzXCIpO1xuICAgICAgICAqL1xuICAgIGlmKGljb25baWNvbi5sZW5ndGgtMV09PVwiZFwiKXtcbiAgICAgICQoXCJib2R5XCIpLmFkZENsYXNzKFwiZGF5XCIpO1xuICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJuaWdodFwiKTtcbiAgICB9ZWxzZSBpZihpY29uW2ljb24ubGVuZ3RoLTFdPT1cIm5cIil7XG4gICAgICAkKFwiYm9keVwiKS5hZGRDbGFzcyhcIm5pZ2h0XCIpO1xuICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJkYXlcIik7XG4gICAgfVxuICB9XG5cbiAgLy8gZ2V0IGxvY2F0aW9uIGFuZCByZW5kZXIgd2VhdGhlclxuICAvLyBhZnRlciBwYWdlIGxvYWRcbiAgbG9nKFwicGFnZSBsb2FkZWRcIik7XG4gIGdldENvb3JkaW5hdGVzKCk7XG5cbiAgLyoqXG4gICAgKiB0b2dnbGUgYmV0d2VlbiBjZWxzaXVzIGFuZCBmYWhyZW5oZWl0XG4gICAgKiBhZGQvcmVtb3ZlIGZvbnRhd2Vzb21lIGNsYXNzZXNcbiAgICAqIGNhbGN1bGF0ZSBhbmQgdXBkYXRlIHRlbXBlcmF0dXJlXG4gICAgKiBmYWhyZW5oZWl0ID0gKGNlbHNpdXMgKiA5LzUpKzMyXG4gICAgKi9cbiAgJCgnLnRvZ2dsZScpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe1xuICAgIHZhciBjdXJyZW50PSQoJy51bml0JykudGV4dCgpO1xuICAgIGlmKGN1cnJlbnRbY3VycmVudC5sZW5ndGgtMV09PVwiRlwiKXsgLy9jaGVjayBsYXN0IGxldHRlciBvZiBjdXJyZW50IHRleHRcbiAgICAgIHZhciBjZWw9TWF0aC5yb3VuZCh3ZWF0aGVyQVBJRGF0YS5tYWluLnRlbXAqMTAwKTsgLy9zY2FsZSB1cCBieSAqMTAwXG4gICAgICBjZWwvPTEwMDsgLy9zY2FsZSBkb3duXG4gICAgICAkKCcudGVtcGVyYXR1cmUnKS5odG1sKGNlbCk7XG4gICAgICAkKCcudW5pdCcpLmh0bWwoXCImZGVnO0NcIik7XG4gICAgICAkKCcudG9nZ2xlJykucmVtb3ZlQ2xhc3MoXCJmYS10b2dnbGUtb25cIik7XG4gICAgICAkKCcudG9nZ2xlJykuYWRkQ2xhc3MoXCJmYS10b2dnbGUtb2ZmXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvL2NhbGMgZmFyZW5oZWl0IGFuZCBtdWx0aXBseSBieSAxMDAgZm9yIHNjYWxlIHVwICh0d28gZGVjaW1hbCBoYWNrKVxuICAgICAgdmFyIGZhcj1NYXRoLnJvdW5kKCgod2VhdGhlckFQSURhdGEubWFpbi50ZW1wICogOSAvIDUgKSszMikqMTAwKTtcbiAgICAgIGZhci89MTAwOyAvL3NjYWwgZG93biB0byB0d28gZGVjaW1hbHNcbiAgICAgICQoJy50ZW1wZXJhdHVyZScpLmh0bWwoZmFyKTtcbiAgICAgICQoJy51bml0JykuaHRtbChcIiZkZWc7RlwiKTtcbiAgICAgICQoJy50b2dnbGUnKS5yZW1vdmVDbGFzcyhcImZhLXRvZ2dsZS1vZmZcIik7XG4gICAgICAkKCcudG9nZ2xlJykuYWRkQ2xhc3MoXCJmYS10b2dnbGUtb25cIik7XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICAqIHJlZnJlc2ggd2VhdGhlciBvbiBkZW1hbmRcbiAgICAqL1xuICAkKCcuZ2V0LXdlYXRoZXInKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXtcbiAgICBsb2coXCJpbnNpZGUgR2V0L1JlZnJlc2ggd2VhdGhlciBidXR0b24gY2xpY2tcIik7XG4gICAgZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgfSk7XG59KTtcbiJdfQ==
